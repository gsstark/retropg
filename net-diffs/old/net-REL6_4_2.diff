 src/backend/catalog/genbki.sh.in | 2 +-
 src/backend/storage/ipc/ipc.c    | 2 --
 src/backend/utils/adt/float.c    | 1 -
 src/backend/utils/error/elog.c   | 2 --
 src/backend/utils/error/exc.c    | 2 --
 src/backend/utils/sort/psort.c   | 5 ++++-
 src/bin/psql/stringutils.c       | 2 +-
 src/configure                    | 2 +-
 src/include/c.h                  | 3 +++
 src/include/postgres.h           | 6 +++---
 10 files changed, 13 insertions(+), 14 deletions(-)

diff --git a/src/backend/catalog/genbki.sh.in b/src/backend/catalog/genbki.sh.in
index 5265524..694b187 100644
--- a/src/backend/catalog/genbki.sh.in
+++ b/src/backend/catalog/genbki.sh.in
@@ -77,7 +77,7 @@ sed -e "s/;[ 	]*$//g" \
     -e "s/[ 	]Oid/\ oid/g" \
     -e "s/[ 	]NameData/\ name/g" \
     -e "s/^Oid/oid/g" \
-    -e "s/^NameData/\name/g" \
+    -e "s/^NameData/name/g" \
     -e "s/(NameData/(name/g" \
     -e "s/(Oid/(oid/g" \
 	-e "s/NAMEDATALEN/$NAMEDATALEN/g" \
diff --git a/src/backend/storage/ipc/ipc.c b/src/backend/storage/ipc/ipc.c
index 2e63408..ffda693 100644
--- a/src/backend/storage/ipc/ipc.c
+++ b/src/backend/storage/ipc/ipc.c
@@ -438,7 +438,6 @@ static int	IpcSemaphoreLock_return;
 void
 IpcSemaphoreLock(IpcSemaphoreId semId, int sem, int lock)
 {
-	extern int	errno;
 	int			errStatus;
 	struct sembuf sops;
 
@@ -482,7 +481,6 @@ static int	IpcSemaphoreUnlock_return;
 void
 IpcSemaphoreUnlock(IpcSemaphoreId semId, int sem, int lock)
 {
-	extern int	errno;
 	int			errStatus;
 	struct sembuf sops;
 
diff --git a/src/backend/utils/adt/float.c b/src/backend/utils/adt/float.c
index 5dfa2df..c50be83 100644
--- a/src/backend/utils/adt/float.c
+++ b/src/backend/utils/adt/float.c
@@ -105,7 +105,6 @@ extern double rint(double x);
 
 #endif
 
-extern int	isinf(double x);
 
 #endif
 /* ========== USER I/O ROUTINES ========== */
diff --git a/src/backend/utils/error/elog.c b/src/backend/utils/error/elog.c
index 09f4627..04290b4 100644
--- a/src/backend/utils/error/elog.c
+++ b/src/backend/utils/error/elog.c
@@ -64,8 +64,6 @@ elog(int lev, const char *fmt,...)
 				line[ELOG_MAXLEN];
 	char	   *bp;
 	const char *cp;
-	extern int	errno,
-				sys_nerr;
 
 #ifndef PG_STANDALONE
 	extern FILE *Pfout;
diff --git a/src/backend/utils/error/exc.c b/src/backend/utils/error/exc.c
index 5fc7b21..2b84f2d 100644
--- a/src/backend/utils/error/exc.c
+++ b/src/backend/utils/error/exc.c
@@ -101,8 +101,6 @@ ExcPrint(Exception *excP,
 		 ExcData data,
 		 ExcMessage message)
 {
-	extern int	errno;
-	extern int	sys_nerr;
 
 #ifdef	lint
 	data = data;
diff --git a/src/backend/utils/sort/psort.c b/src/backend/utils/sort/psort.c
index 9a1271e..a69b3ce 100644
--- a/src/backend/utils/sort/psort.c
+++ b/src/backend/utils/sort/psort.c
@@ -19,6 +19,9 @@
  * file. You must now explicitly call an interface function to end the sort,
  * psort_end, when you are done.
  *		Now most of the global variables are stuck in the Sort nodes, and
+#include <errno.h>
+#include <errno.h>
+#include <errno.h>
  * accessed from there (they are passed to all the psort routines) so that
  * each sort running has its own separate state. This is facilitated by having
  * the Sort nodes passed in to all the interface functions.
@@ -33,6 +36,7 @@
  *				MAXMERGE, MAXTAPES
  *-------------------------------------------------------------------------
  */
+#include <errno.h>
 #include <stdio.h>
 #include <math.h>
 #include <string.h>
@@ -1022,7 +1026,6 @@ gettape()
 	static int	tapeinit = 0;
 	char	   *mktemp();
 	static unsigned int uniqueFileId = 0;
-	extern int	errno;
 	char		uniqueName[MAXPGPATH];
 
 	tp = (struct tapelst *) palloc((unsigned) sizeof(struct tapelst));
diff --git a/src/bin/psql/stringutils.c b/src/bin/psql/stringutils.c
index 2149028..da4c254 100644
--- a/src/bin/psql/stringutils.c
+++ b/src/bin/psql/stringutils.c
@@ -17,7 +17,7 @@
 #include <stdlib.h>
 
 #include "postgres.h"
-#ifndef HAVE_STRDUP
+#if 0
 #include "strdup.h"
 #endif
 
diff --git a/src/configure b/src/configure
index fa079e4..a8d7818 100755
--- a/src/configure
+++ b/src/configure
@@ -1289,7 +1289,7 @@ fi
 
 if test "$CC" = "gcc"
 then
-	CC_VERSION=`${CC} --version`
+	CC_VERSION=`${CC} --version | head -1`
 else
 	CC_VERSION=""
 fi
diff --git a/src/include/c.h b/src/include/c.h
index ffbf750..fbb5583 100644
--- a/src/include/c.h
+++ b/src/include/c.h
@@ -44,13 +44,16 @@
 #define C_H
 
 /* We have to include stdlib.h here because it defines many of these macros
+#include <errno.h>
    on some platforms, and we only want our definitions used if stdlib.h doesn't
    have its own.
 */
 #include <stdlib.h>
+#include <errno.h>
 
 /* ----------------------------------------------------------------
  *				Section 1:	bool, true, false, TRUE, FALSE
+#include <errno.h>
  * ----------------------------------------------------------------
  */
 /*
diff --git a/src/include/postgres.h b/src/include/postgres.h
index ff81c2b..36f0b3b 100644
--- a/src/include/postgres.h
+++ b/src/include/postgres.h
@@ -118,9 +118,9 @@ typedef uint32 CommandId;
 #define CATALOG(x) \
 	typedef struct CppConcat(FormData_,x)
 
-#define DATA(x) extern int errno
-#define DESCR(x) extern int errno
-#define DECLARE_INDEX(x) extern int errno
+#define DATA(x) extern int no_such_variable
+#define DESCR(x) extern int no_such_variable
+#define DECLARE_INDEX(x) extern int no_such_variable
 
 #define BUILD_INDICES
 #define BOOTSTRAP
