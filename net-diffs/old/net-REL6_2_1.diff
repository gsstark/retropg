 src/backend/commands/Makefile  | 2 +-
 src/backend/libpq/pqcomm.c     | 2 --
 src/backend/storage/ipc/ipc.c  | 2 --
 src/backend/utils/adt/float.c  | 1 -
 src/backend/utils/error/elog.c | 2 --
 src/backend/utils/error/exc.c  | 2 --
 src/backend/utils/sort/psort.c | 5 ++++-
 src/bin/psql/stringutils.c     | 2 +-
 src/include/c.h                | 3 +++
 src/include/postgres.h         | 4 ++--
 10 files changed, 11 insertions(+), 14 deletions(-)

diff --git a/src/backend/commands/Makefile b/src/backend/commands/Makefile
index 5d8e945..1b476e8 100644
--- a/src/backend/commands/Makefile
+++ b/src/backend/commands/Makefile
@@ -18,7 +18,7 @@ INCLUDE_OPT = -I.. \
 CFLAGS+=$(INCLUDE_OPT)
 
 OBJS = async.o creatinh.o command.o copy.o defind.o define.o \
-       purge.o remove.o rename.o vacuum.o version.o view.o cluster.o \
+       purge.o remove.o rename.o vacuum.o view.o cluster.o \
        recipe.o explain.o sequence.o trigger.o
 
 all: SUBSYS.o
diff --git a/src/backend/libpq/pqcomm.c b/src/backend/libpq/pqcomm.c
index 40a9f32..88cccaa 100644
--- a/src/backend/libpq/pqcomm.c
+++ b/src/backend/libpq/pqcomm.c
@@ -546,7 +546,6 @@ pq_async_notify()
 	}
 	else
 	{
-		extern int	errno;
 
 		printf("SIGURG but no data: len = %d, err=%d\n", len, errno);
 	}
@@ -716,7 +715,6 @@ StreamOpen(char *hostName, short portName, Port *port)
 {
 	struct hostent *hp;
 	int			laddrlen = sizeof(struct sockaddr_in);
-	extern int	errno;
 
 	if (!hostName)
 		hostName = "localhost";
diff --git a/src/backend/storage/ipc/ipc.c b/src/backend/storage/ipc/ipc.c
index adb3571..6090f35 100644
--- a/src/backend/storage/ipc/ipc.c
+++ b/src/backend/storage/ipc/ipc.c
@@ -381,7 +381,6 @@ static int	IpcSemaphoreLock_return;
 void
 IpcSemaphoreLock(IpcSemaphoreId semId, int sem, int lock)
 {
-	extern int	errno;
 	int			errStatus;
 	struct sembuf sops;
 
@@ -425,7 +424,6 @@ static int	IpcSemaphoreUnlock_return;
 void
 IpcSemaphoreUnlock(IpcSemaphoreId semId, int sem, int lock)
 {
-	extern int	errno;
 	int			errStatus;
 	struct sembuf sops;
 
diff --git a/src/backend/utils/adt/float.c b/src/backend/utils/adt/float.c
index 6917e52..6a741a6 100644
--- a/src/backend/utils/adt/float.c
+++ b/src/backend/utils/adt/float.c
@@ -110,7 +110,6 @@ extern double rint(double x);
 static int	isinf(double x);
 
 #else
-extern int	isinf(double x);
 
 #endif
 
diff --git a/src/backend/utils/error/elog.c b/src/backend/utils/error/elog.c
index 5acc371..b8380ab 100644
--- a/src/backend/utils/error/elog.c
+++ b/src/backend/utils/error/elog.c
@@ -47,8 +47,6 @@ elog(int lev, const char *fmt,...)
 				line[ELOG_MAXLEN];
 	register char *bp;
 	register const char *cp;
-	extern int	errno,
-				sys_nerr;
 
 #ifndef PG_STANDALONE
 	extern FILE *Pfout;
diff --git a/src/backend/utils/error/exc.c b/src/backend/utils/error/exc.c
index 8a89935..96e4262 100644
--- a/src/backend/utils/error/exc.c
+++ b/src/backend/utils/error/exc.c
@@ -103,8 +103,6 @@ ExcPrint(Exception *excP,
 		 ExcData data,
 		 ExcMessage message)
 {
-	extern int	errno;
-	extern int	sys_nerr;
 
 #ifdef	lint
 	data = data;
diff --git a/src/backend/utils/sort/psort.c b/src/backend/utils/sort/psort.c
index 5af863b..2236565 100644
--- a/src/backend/utils/sort/psort.c
+++ b/src/backend/utils/sort/psort.c
@@ -19,6 +19,9 @@
  * file. You must now explicitly call an interface function to end the sort,
  * psort_end, when you are done.
  *		Now most of the global variables are stuck in the Sort nodes, and
+#include <errno.h>
+#include <errno.h>
+#include <errno.h>
  * accessed from there (they are passed to all the psort routines) so that
  * each sort running has its own separate state. This is facilitated by having
  * the Sort nodes passed in to all the interface functions.
@@ -33,6 +36,7 @@
  *				MAXMERGE, MAXTAPES
  *-------------------------------------------------------------------------
  */
+#include <errno.h>
 #include <stdio.h>
 #include <math.h>
 #include <string.h>
@@ -990,7 +994,6 @@ gettape()
 	static int	tapeinit = 0;
 	char	   *mktemp();
 	static unsigned int uniqueFileId = 0;
-	extern int	errno;
 	char		uniqueName[MAXPGPATH];
 
 	tp = (struct tapelst *) palloc((unsigned) sizeof(struct tapelst));
diff --git a/src/bin/psql/stringutils.c b/src/bin/psql/stringutils.c
index a868be9..eec2656 100644
--- a/src/bin/psql/stringutils.c
+++ b/src/bin/psql/stringutils.c
@@ -17,7 +17,7 @@
 #include <stdlib.h>
 
 #include "postgres.h"
-#ifndef HAVE_STRDUP
+#if 0
 #include "strdup.h"
 #endif
 
diff --git a/src/include/c.h b/src/include/c.h
index 8314f56..022c725 100644
--- a/src/include/c.h
+++ b/src/include/c.h
@@ -44,13 +44,16 @@
 #define C_H
 
 /* We have to include stdlib.h here because it defines many of these macros
+#include <errno.h>
    on some platforms, and we only want our definitions used if stdlib.h doesn't
    have its own.
 */
 #include <stdlib.h>
+#include <errno.h>
 
 /* ----------------------------------------------------------------
  *				Section 1:	bool, true, false, TRUE, FALSE
+#include <errno.h>
  * ----------------------------------------------------------------
  */
 /*
diff --git a/src/include/postgres.h b/src/include/postgres.h
index 37d966c..2897c16 100644
--- a/src/include/postgres.h
+++ b/src/include/postgres.h
@@ -175,8 +175,8 @@ typedef uint16 CommandId;
 #define CATALOG(x) \
 	typedef struct CppConcat(FormData_,x)
 
-#define DATA(x) extern int errno
-#define DECLARE_INDEX(x) extern int errno
+#define DATA(x) extern int no_such_varible
+#define DECLARE_INDEX(x) extern int no_such_variable
 
 #define BUILD_INDICES
 #define BOOTSTRAP
